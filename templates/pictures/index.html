<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Rainbow Uploader</title>
        <style type="text/css">
            body{font-family:courier;color:#999}
            h1{margin:0;font-size:3em;}
            h2{margin:0}
            #upload{
                width:100px;
                height:100px;
                overflow:hidden;
                cursor:pointer;
                -webkit-transition:background-color 1s ease-in-out 1s;
            }
            #imgwp{
                margin-top:0;
                -webkit-transition:margin-top 1s ease-in-out 1s;
            }
            #imgwp.uploading{
                margin-top:-100px;
            }
            #mainframe{
                width:720px;
                margin:0 auto 0 auto;
            }
            #footer{
                text-align:right;
                border-top:dashed 2px #ccc;
            }
            #content{
                min-height:400px;
                border-top:dashed 2px #ccc;
            }
            a{
                -webkit-border-radius:0.5em;
                -moz-border-radius:0.5em;
                -ms-border-radius:0.5em;
                -o-border-radius:0.5em;
                border-radius:0.5em;
                color:white;
                text-decoration:none;
            }

            .green{
                background-color:#39fa6a;
            }
            .blue{
                background-color:#399dfa;
            }
            .pink{
                background-color:#fa3966;
            }
            .purple{
                background-color:#b039fa;
            }
            .orange{
                background-color:#f5ab00;
            }
            .hidden{
                overflow:hidden;
                width:0;
                height:0;
            }
            #rainbow tr{
                overflow:hidden;
                height:100px;
                -webkit-transition:opacity 0.4s ease-in-out;
            }
        </style>
    </head>
    <body>
        <div class="hidden">
            <iframe name="response"></iframe>
            <form enctype="multipart/form-data" method="post" id='uploadform' target="response" action="/pictures/upload">
                <input type='hidden' id='csrfmiddlewaretoken' name='csrfmiddlewaretoken' value='80f06e42520fcf810f58d83b8bb0ad71' />
                <input type="file" name="image" id="id_image" />
            </form>
        </div>
        <div id="mainframe">
            <img src="/static/rainbowhead.png" />
            <div id="content">
                <table id="rainbow" border="0">
                </table>
                <table border="0" width="100%">
                    <tr>
                        <td rowspan="2" width="120">
                            <div id="upload" class="green">
                                <div id="imgwp">
                                    <img src="/static/upload.png" />
                                    <img src="/static/uploading.gif" />
                                </div>
                            </div>
                        </td>
                        <td>
                            <h1>Rainbow</h1>
                            Upload a picture here
                        </td>
                        <td rowspan="2" align="right">
                            <a href="" class="green">&nbsp;&lt;&lt;</a>
                        </td>
                    </tr>
                    <tr>
                        <td><a href="" class="green" >Confirm and clear all</a></td>
                    </tr>
                </table>
            </div>
            <div id="footer">
                ant.isnot.tk Â© 2011
            </div>
        </div>

        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script type="text/javascript">
            function callbackhandle(status,imageurl,title,detail){
                if(status==0){
                    $('<tr></tr>').append("<td width='120'><img src='"+imageurl+"' /></td>").append("<td><h2>"+title+"</h2><p>Say somethin about this picture here</p>").appendTo('#rainbow');
                }
                else{
                    alert('Something is wrong when uploading a picture.\nPlease try again later!')
                }
                $('#imgwp').removeClass('uploading');
                var colors=Array('green','blue','orange','pink','purple');
                var color=colors[Math.floor(Math.random()*5)]
                $('#upload').removeClass().addClass(color);
                

            }
            $('#upload').click(function(){
                    if(!$('#imgwp').hasClass('uploading')){
                        $('#id_image').bind('change',
                            function(){
                                $('#imgwp').addClass('uploading');
                                setTimeout(function(){
                                    $('#uploadform').submit(); 
                                    },1000);
                            })
                        .click();
                    }
                    })
</script>
    </body>
</html>
